{
  "version": 3,
  "sources": ["../../../../../apps/shifaa/shifaa/public/js/patient_quick_entry.js", "../../../../../apps/shifaa/shifaa/public/js/observation.js", "frappe-html:/home/pico/pico-bench/apps/shifaa/shifaa/public/js/observation.html", "../../../../../apps/shifaa/shifaa/public/js/diagnostic_report_controller.js", "../../../../../apps/shifaa/shifaa/public/js/observation_widget.js", "../../../../../apps/shifaa/shifaa/public/js/shifaa_note.js", "frappe-html:/home/pico/pico-bench/apps/shifaa/shifaa/public/js/shifaa_note.html", "frappe-html:/home/pico/pico-bench/apps/shifaa/shifaa/public/js/shifaa_orders.html"],
  "sourcesContent": ["frappe.provide('frappe.ui.form');\n\nfrappe.ui.form.PatientQuickEntryForm = class PatientQuickEntryForm extends frappe.ui.form.QuickEntryForm {\n\n\tconstructor(doctype, after_insert, init_callback, doc, force) {\n\t\tsuper(doctype, after_insert, init_callback, doc, force);\n\t\tthis.skip_redirect_on_error = true;\n\t}\n\n\trender_dialog() {\n\n\t\t// filter fields for quick entry which are not wired in standard_fields\n\t\tlet custom_fields = this.mandatory.filter(\n\t\t\tfield => !this.get_standard_fields().map(field => field.fieldname).includes(field.fieldname)\n\t\t);\n\n\t\tthis.mandatory = this.get_standard_fields();\n\n\t\t// preserve standard_fields order, splice custom fields after Patient name fields\n\t\tthis.mandatory.splice(3, 0, ...custom_fields);\n\n\t\tsuper.render_dialog();\n\t}\n\n\tget_standard_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: __('First Name'),\n\t\t\t\tfieldname: 'first_name',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Middle Name'),\n\t\t\t\tfieldname: 'middle_name',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('last Name'),\n\t\t\t\tfieldname: 'last_name',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\tcollapsible: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Gender'),\n\t\t\t\tfieldname: 'sex',\n\t\t\t\tfieldtype: 'Link',\n\t\t\t\toptions: 'Gender'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Blood Group'),\n\t\t\t\tfieldname: 'blood_group',\n\t\t\t\tfieldtype: 'Select',\n\t\t\t\toptions: frappe.meta.get_docfield('Patient', 'blood_group').options\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Column Break'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Birth Date'),\n\t\t\t\tfieldname: 'dob',\n\t\t\t\tfieldtype: 'Date'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Identification Number (UID)'),\n\t\t\t\tfieldname: 'uid',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\tlabel: __('Primary Contact'),\n\t\t\t\tcollapsible: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Email Id'),\n\t\t\t\tfieldname: 'email',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\toptions: 'Email'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Invite as User'),\n\t\t\t\tfieldname: 'invite_user',\n\t\t\t\tfieldtype: 'Check'\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Column Break'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Mobile Number'),\n\t\t\t\tfieldname: 'mobile',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\toptions: 'Phone'\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\tlabel: __('Primary Address'),\n\t\t\t\tcollapsible: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Address Line 1'),\n\t\t\t\tfieldname: 'address_line1',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Address Line 2'),\n\t\t\t\tfieldname: 'address_line2',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('ZIP Code'),\n\t\t\t\tfieldname: 'pincode',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Column Break'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('City'),\n\t\t\t\tfieldname: 'city',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('State'),\n\t\t\t\tfieldname: 'state',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Country'),\n\t\t\t\tfieldname: 'country',\n\t\t\t\tfieldtype: 'Link',\n\t\t\t\toptions: 'Country'\n\t\t\t}\n\t\t];\n\t}\n}", "frappe.provide(\"shifaa\");\n\nshifaa.Observation = class Observation {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\trefresh() {\n\t\tvar me = this;\n\t\tthis.notes_wrapper.find('.observation-section').remove();\n\t\tfrappe.run_serially([\n\t\t\t() => frappe.call({\n\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.get_observation_details\",\n\t\t\targs: {\n\t\t\t\tdocname: me.frm.doc.name\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tcallback: function(r) {\n\t\t\t\tlet observation_details = r.message || [];\n\t\t\t\tlet observation_html = frappe.render_template(\n\t\t\t\t\t'observation',\n\t\t\t\t\t{\n\t\t\t\t\t\tobservation_details: observation_details,\n\t\t\t\t\t\tcreate_observation: me.create_observation\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t$(observation_html).appendTo(me.observation_wrapper);\n\t\t\t\t}\n\t\t\t}),\n\t\t\t() => {\n\t\t\t\tme.add_observations();\n\t\t\t\t$(\".observations\").find(\".edit-observation-btn\").on(\"click\", function() {\n\t\t\t\t\tme.edit_observation(this);\n\t\t\t\t});\n\t\t\t\tdocument.getElementById(\"result-text\").onchange = function() {\n\t\t\t\t\tme.frm.dirty()\n\t\t\t\t};\n\t\t\t\t$(\".observations\").find(\".result-text\").change(function() {\n\t\t\t\t\tme.frm.dirty()\n\t\t\t\t})\n\t\t\t\t// $('#result-text').change(function() {\n\t\t\t\t// \tconsole.log(\"UUUUUUUUUUU\")\n\t\t\t\t// })\n\n\t\t\t}\n\t\t])\n\t}\n\n\tadd_observations () {\n\t\tlet me = this;\n\t\tlet _add_observations = () => {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Add Observation'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Observation Template\",\n\t\t\t\t\t\t\"fieldname\": \"observation_template\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"Observation Template\",\n\t\t\t\t\t\t\"reqd\": 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Permitted Data Type\",\n\t\t\t\t\t\t\"fieldname\": \"permitted_data_type\",\n\t\t\t\t\t\t\"fieldtype\": \"Data\",\n\t\t\t\t\t\t\"read_only\": 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Text\",\n\t\t\t\t\t\t\"fieldname\": \"result_text\",\n\t\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.permitted_data_type=='Text'\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Float\",\n\t\t\t\t\t\t\"fieldname\": \"result_float\",\n\t\t\t\t\t\t\"fieldtype\": \"Float\",\n\t\t\t\t\t\t\"depends_on\": \"eval:['Quantity', 'Numeric'].includes(doc.permitted_data_type)\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Data\",\n\t\t\t\t\t\t\"fieldname\": \"result_data\",\n\t\t\t\t\t\t\"fieldtype\": \"Data\",\n\t\t\t\t\t\t\"depends_on\": \"eval:['Range', 'Ratio'].includes(doc.permitted_data_type)\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tvar result = \"\";\n\t\t\t\t\tif (['Range', 'Ratio'].includes(data.permitted_data_type)) {\n\t\t\t\t\t\tresult = data.result_data;\n\t\t\t\t\t} else if (['Quantity', 'Numeric'].includes(data.permitted_data_type)) {\n\t\t\t\t\t\tresult = data.result_float;\n\t\t\t\t\t}\n\t\t\t\t\telse if (data.permitted_data_type=='Text') {\n\t\t\t\t\t\tresult = data.result_text;\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.add_observation\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tpatient: me.frm.doc.patient,\n\t\t\t\t\t\t\ttemplate: data.observation_template,\n\t\t\t\t\t\t\tdata_type: data.permitted_data_type || \"\",\n\t\t\t\t\t\t\tresult: result,\n\t\t\t\t\t\t\tdoc: me.frm.doc.doctype,\n\t\t\t\t\t\t\tdocname: me.frm.doc.name\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Add Observation')\n\t\t\t});\n\t\t\td.fields_dict['observation_template'].df.onchange = () => {\n\t\t\t\tif (d.get_value(\"observation_template\")) {\n\t\t\t\t\tfrappe.db.get_value(\"Observation Template\", {\"name\": d.get_value(\"observation_template\")}, [\"permitted_data_type\", \"has_component\"], (r) => {\n\t\t\t\t\t\tif (r.permitted_data_type && !r.has_component) {\n\t\t\t\t\t\t\td.set_value(\"permitted_data_type\", r.permitted_data_type)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\td.show();\n\t\t};\n\t\t$(\".new-observation-btn\").click(_add_observations);\n\t}\n\n\tedit_observation (edit_btn) {\n\t\tvar me = this;\n\t\tlet row = $(edit_btn).closest('.observation');\n\t\tlet observation_name = row.attr(\"name\");\n\t\tlet permitted_data_type = row.attr(\"addatatype\");\n\t\tlet result = $(row).find(\".result-content\").html().trim();\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit Observation'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Observation\",\n\t\t\t\t\t\t\"fieldname\": \"observation\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"Observation\",\n\t\t\t\t\t\t\"default\": observation_name,\n\t\t\t\t\t\t\"read_only\": 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Permitted Data Type\",\n\t\t\t\t\t\t\"fieldname\": \"permitted_data_type\",\n\t\t\t\t\t\t\"fieldtype\": \"Data\",\n\t\t\t\t\t\t\"read_only\": 1,\n\t\t\t\t\t\t\"default\": permitted_data_type\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Text\",\n\t\t\t\t\t\t\"fieldname\": \"result_text\",\n\t\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.permitted_data_type=='Text'\",\n\t\t\t\t\t\t\"default\": result\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Float\",\n\t\t\t\t\t\t\"fieldname\": \"result_float\",\n\t\t\t\t\t\t\"fieldtype\": \"Float\",\n\t\t\t\t\t\t\"depends_on\": \"eval:['Quantity', 'Numeric'].includes(doc.permitted_data_type)\",\n\t\t\t\t\t\t\"default\": result\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Result Data\",\n\t\t\t\t\t\t\"fieldname\": \"result_data\",\n\t\t\t\t\t\t\"fieldtype\": \"Data\",\n\t\t\t\t\t\t\"depends_on\": \"eval:['Range', 'Ratio'].includes(doc.permitted_data_type)\",\n\t\t\t\t\t\t\"default\": result\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tvar result = \"\";\n\t\t\t\t\tif (['Range', 'Ratio'].includes(data.permitted_data_type)) {\n\t\t\t\t\t\tresult = data.result_data;\n\t\t\t\t\t} else if (['Quantity', 'Numeric'].includes(data.permitted_data_type)) {\n\t\t\t\t\t\tresult = data.result_float;\n\t\t\t\t\t}\n\t\t\t\t\telse if (data.permitted_data_type=='Text') {\n\t\t\t\t\t\tresult = data.result_text;\n\t\t\t\t\t}\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.edit_observation\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tobservation: data.observation,\n\t\t\t\t\t\t\tdata_type: data.permitted_data_type || \"\",\n\t\t\t\t\t\t\tresult: result\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __(\"Edit\")\n\t\t\t});\n\t\t\td.show();\n\t}\n\n}", "\n\tfrappe.templates['observation'] = `<div class=\"observation-section\">\n\t<div class=\"new-btn pb-3\">\n\t\t<span>\n\t\t\t<button class=\"btn btn-sm small new-observation-btn mr-1\">\n\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t<use href=\"#icon-add\"></use>\n\t\t\t\t</svg>\n\t\t\t\t{{ __(\"New Observation\") }}\n\t\t\t</button>\n\t\t</span>\n\t</div>\n\t<div class=\"observation-details row\" style=\"width: 100%; color:rgb(169, 169, 169); padding-left: 35px;\">\n\t\t<div style=\"width: 20%;\">\n\t\t\t{{ __(\"Observation\") }}\n\t\t</div>\n\t\t<div style=\"width: 19%;\">\n\t\t\t{{ __(\"Date Time\") }}\n\t\t</div>\n\t\t<div style=\"padding-left:30px; padding-right:10px; width: 20%;\">\n\t\t\t{{ __(\"Result\") }}\n\t\t</div>\n\t\t<div style=\"width: 7%;\">\n\t\t\t{{ __(\"UOM\") }}\n\t\t</div>\n\t\t<div style=\"width: 20%;\">\n\t\t\t{{ __(\"Method\") }}\n\t\t</div>\n\t\t<div style=\"width: 10%;\">\n\t\t\t{{ __(\"Reference Range\") }}\n\t\t</div>\n\t</div>\n\t<div class=\"section-body\">\n\t\t<div class=\"observations pr-1\">\n\t\t\t{% if (observation_details && observation_details.length) { %}\n\t\t\t\t{% for(var i=0, l=observation_details.length; i<l; i++) { %}\n\t\t\t\t\t{% if (observation_details[i].observation || observation_details[i].template_reference) { %}\n\t\t\t\t\t\t<div class=\"observation\" style=\"width: 100%;\" name=\"{{ observation_details[i].observation.name }}\" addatatype=\"{{ observation_details[i].observation.permitted_data_type }}\">\n\t\t\t\t\t\t\t<div class=\"observation-details row\">\n\t\t\t\t\t\t\t\t<div style=\"width: 20%;\">\n\t\t\t\t\t\t\t\t\t<a href=\"/app/observation/{{ observation_details[i].observation.name }}\" title=\"{{ __('Observation') }}\">\n\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i].template_reference.preferred_display_name) { %}\n\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].template_reference.preferred_display_name %}\n\t\t\t\t\t\t\t\t\t\t{% } else { %}\n\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].observation.observation_template %}\n\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style=\"width: 19%;\">\n\t\t\t\t\t\t\t\t\t{% if (observation_details[i].observation.posting_datetime) { %}\n\t\t\t\t\t\t\t\t\t\t{{ frappe.datetime.global_date_format(observation_details[i].observation.posting_datetime) }}\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"result\" style=\"width: 20%;\">\n\t\t\t\t\t\t\t\t\t{% if( ['Range', 'Ratio'].includes(observation_details[i].observation.permitted_data_type)) { %}\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].observation.result_data %}\n\t\t\t\t\t\t\t\t\t{% } else if (['Quantity', 'Numeric'].includes(observation_details[i].observation.permitted_data_type)) { %}\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].observation.result_float %}\n\n\t\t\t\t\t\t\t\t\t{% } else if (observation_details[i].observation.permitted_data_type=='Text') { %}\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].observation.result_text %}\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style=\"width: 7%;\">\n\t\t\t\t\t\t\t\t\t{% if (observation_details[i].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].template_reference.permitted_unit %}\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style=\"width: 20%;\">\n\t\t\t\t\t\t\t\t\t{% if (observation_details[i].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t{%= observation_details[i].template_reference.method %}\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style=\"width: 10%;\">\n\t\t\t\t\t\t\t\t\t{% if (observation_details[i].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t{{observation_details[i].template_reference.normal_from}}-{{observation_details[i].template_reference.normal_to}}\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style=\"width: 1%;\">\n\t\t\t\t\t\t\t\t\t<span class=\"edit-observation-btn btn btn-link\">\n\t\t\t\t\t\t\t\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-edit\"></use></svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t{% } else { %}\n\t\t\t\t\t{% for (let key in observation_details[i]) { %}\n\t\t\t\t\t<div class=\"grouped-obs\">\n\t\t\t\t\t\t\t<div class=\"flex justify-between\" style=\"padding-bottom: 10px;\">\n\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t<a href=\"/app/observation/{{ key.split('|')[1] }}\" title=\"{{ __('Grouped Observations') }}\">\n\t\t\t\t\t\t\t\t\t\t\t{%= key.split(\"|\")[0] %}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{% for(var j=0, k=observation_details[i][key].length; j<k; j++) { %}\n\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].observation || observation_details[i][key][j].template_reference) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"observation\" name=\"{{ observation_details[i][key][j].observation.name }}\" addatatype=\"{{ observation_details[i][key][j].observation.permitted_data_type }}\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"observation-details row\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 20%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/app/observation/{{ observation_details[i][key][j].observation.name }}\" title=\"{{ __('Observation') }}\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].template_reference.preferred_display_name) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].template_reference.preferred_display_name %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{% } else { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].observation.observation_template %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 19%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].observation.posting_datetime) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ frappe.datetime.global_date_format(observation_details[i][key][j].observation.posting_datetime) }}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"result\" style=\"padding-left:30px; padding-right:10px; width: 23%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t{% if( ['Range', 'Ratio'].includes(observation_details[i][key][j].observation.permitted_data_type)) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"result-text\" type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].observation.result_data %}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } else if (['Quantity', 'Numeric'].includes(observation_details[i][key][j].observation.permitted_data_type)) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"result-text\" type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].observation.result_float %}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } else if (observation_details[i][key][j].observation.permitted_data_type=='Text') { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted ml-1 result-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"result-text\" type=\"text\" id=\"result-text\" name=\"fname\" size=\"6\" value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].observation.result_text %}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 7%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].template_reference.permitted_unit %}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 20%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{%= observation_details[i][key][j].template_reference.method %}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 10%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t{% if (observation_details[i][key][j].template_reference) { %}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{observation_details[i][key][j].template_reference.normal_from}}-{{observation_details[i][key][j].template_reference.normal_to}}\n\t\t\t\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"width: 1%;\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"edit-observation-btn btn btn-link\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-edit\"></use></svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t{% } %}\n\t\t\t\t\t{% } %}\n\t\t\t    {% } %}\n            {% } else { %}\n\t\t\t<div class=\"no-obs text-muted\">\n                    {{ __(\"No Observations\") }}\n                </div>\n\t\t    {% } %}\n\t\t</div>\n\t</div>\n</div>\n\t</div>\n</div>\n</div>\n</div>\n\n\n<style>\n.observation-section {\n\tmin-height: 50px;\n\tpadding-left: 0px;\n\tpadding-bottom: 15px !important;\n}\n\n.observation-section .new-btn {\n\ttext-align: right;\n}\n\n.observation {\n\tmin-height: 90px;\n\tborder: 1px solid var(--border-color);\n\tpadding-right: 0;\n\tfont-size: 11px;\n\tpadding-left: 15px;\n\tpadding-top: 35px;\n\tmargin-bottom: 25px;\n\tborder-radius: 10px;\n}\n\n.grouped-obs {\n\tborder: 1px solid var(--border-color);\n\tpadding-right: 15px;\n\tfont-size: 11px;\n\tpadding-left: 15px;\n\tpadding-top: 15px;\n\tmargin-bottom: 25px;\n\tborder-radius: 10px;\n}\n\n.single-activity:last-child {\n\tborder-bottom: 1px solid var(--border-color);\n}\n\n.checkbox {\n\tmin-width: 22px;\n}\n\n.observations {\n\twidth: 100%;\n}\n\n.observations:first-child {\n\tborder-right: 0;\n}\n\n.no-obs {\n    text-align: center;\n    padding: 30px;\n}\n\n.form-footer {\n\tbackground-color: var(--bg-color);\n}\n\n.observation-details {\n\tpadding-left: 14px;\n\tpadding-right: 14px;\n}\n\n\n</style>`;\n", "frappe.provide(\"shifaa.Diagnostic.DiagnosticReport\");\n\nshifaa.Diagnostic.DiagnosticReport = class DiagnosticReport {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\trefresh() {\n\t\tvar me = this;\n\t\tthis.ObservationWidgets = []\n\t\t  frappe.call({\n\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.get_observation_details\",\n\t\t\targs: {\n\t\t\t\tdocname: me.frm.doc.name\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tcallback: function(r) {\n\t\t\t\tme.create_widget(r)\n\t\t\t\tlet new_ob_list = [];\n\t\t\t\tconst inputContainer = document.querySelectorAll('.input-with-feedback');\n\t\t\t\tfor (let i = 0; i < inputContainer.length; i++) {\n\t\t\t\t\tnew_ob_list.push(inputContainer[i])\n\t\t\t\t}\n\n\t\t\t\tdocument.addEventListener('keydown', function(event) {\n\t\t\t\t\tconst focusedElement = document.activeElement;\n\t\t\t\t\tlet current_index = 0\n\t\t\t\t\tlet next_index = 0\n\t\t\t\t\tfor (let key in new_ob_list) {\n\t\t\t\t\t\tif (new_ob_list.hasOwnProperty(key) && new_ob_list.includes(focusedElement)) {\n\t\t\t\t\t\t\tcurrent_index = new_ob_list.indexOf(focusedElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (['ArrowDown', 'Enter'].includes(event.key)) {\n\t\t\t\t\t\tnext_index = current_index + 1\n\t\t\t\t\t} else if (event.key === 'ArrowUp') {\n\t\t\t\t\t\tnext_index = current_index - 1\n\t\t\t\t\t}\n\n\t\t\t\t\tif (new_ob_list[next_index]) {\n\t\t\t\t\t\tnew_ob_list[next_index].focus();\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\tme.save_action(\"load\")\n\t}\n\n\tcreate_widget(r) {\n\t\tvar me = this;\n\t\tif (r && r.message[0]) {\n\t\tthis.result = []\n\t\t\tfor (let key in r.message[0]) {\n\t\t\t\tme.ObservationWidgets[key] = new shifaa.ObservationWidget({\n\t\t\t\t\twrapper: me.observation_wrapper,\n\t\t\t\t\tdata: r.message[0][key],\n\t\t\t\t\tfrm: me.frm,\n\t\t\t\t\tresult: this.result\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tsave_action(func) {\n\t\tvar me = this;\n\t\tif (func==\"save\") {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.record_observation_result\",\n\t\t\t\targs: {\n\t\t\t\t\tvalues: this.result\n\t\t\t\t},\n\t\t\t\tfreeze: true,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\t// me.frm.refresh(this)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n}", "frappe.provide(\"shifaa.ObservationWidget\");\n\nshifaa.ObservationWidget = class {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.init_widget();\n\t}\n\n\tinit_widget() {\n\t\tvar me = this;\n\t\tif (me.data.has_component || me.data.has_component == \"true\") {\n\t\t\tif (!me.wrapper.find(`.${me.data.observation}`).length==0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst is_approved = me.data.obs_approved;\n\t\t\tvar btn_action = is_approved ? \"Rejected\" : \"Approved\";\n\t\t\tvar btn_label = is_approved ? \"Reject\" : \"Approve\";\n\n\t\t\tlet grouped_html = (\n\t\t\t\t`<div class=\"${me.data.observation} grouped-obs\" style=\"\n\t\t\t\t\tborder: 1px solid var(--border-color);\n\t\t\t\t\tpadding-right: 0;\n\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\tpadding-top: 15px;\n\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t\tmargin-bottom: 3px;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tbackground-color:var(--bg-color);\">\n\t\t\t\t\t<b>\n\t\t\t\t\t\t<a href=\"/app/observation/${me.data.observation}\">\n\t\t\t\t\t\t\t${me.data.display_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</b>\n\t\t\t\t\t<div style=\"float:right; padding-right:5px; margin-top:-10px;\">\n\t\t\t\t\t\t<button class=\"btn btn-xs btn-secondary small obs-approve\" id=\"authorise-observation-btn-${me.data.observation}\">\n\t\t\t\t\t\t\t<span style=\"font-size:10px;\">${btn_label}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`)\n\t\t\tme.wrapper.append(grouped_html)\n\t\t\tlet component_wrapper = me.wrapper.find(`.${me.data.observation}`)\n\t\t\tfor(var j=0, k=me.data[me.data.observation].length; j<k; j++) {\n\t\t\t\tvar obs_data = me.data[me.data.observation][j].observation;\n\t\t\t\tcomponent_wrapper.append(`<div class=\"observations-${obs_data.name} observs\"\n\t\t\t\t\t\tstyle=\"border: 1px solid var(--border-color);\n\t\t\t\t\t\tpadding-right: 0;\n\t\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\t\tmargin-right: 15px;\n\t\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t\t\tmargin-bottom: 3px;\n\t\t\t\t\t\tborder-radius: var(--border-radius-md);\n\t\t\t\t\t\tbackground-color: var(--fg-color);\n\t\t\t\t\t\tbox-shadow: var(--card-shadow);\"\n\t\t\t\t\t\tvalue=${obs_data.name}>\n\t\t\t\t\t</div>`)\n\n\t\t\t\tme.init_field_group(obs_data, component_wrapper.find(`.observations-${obs_data.name}`))\n\t\t\t}\n\t\t} else {\n\t\t\tif (!me.wrapper.find(`.observations-${me.data.observation.name}`).length==0) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tme.wrapper.append(\n\t\t\t\t`<div class=\"grouped-obs\"\n\t\t\t\t\tstyle=\"me.data.observation\n\t\t\t\t\t\tborder: 1px solid var(--border-color);\n\t\t\t\t\t\tpadding-right: 0;\n\t\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t\t\tmargin-bottom: 3px;\n\t\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\t\tbackground-color:var(--bg-color);\">\n\t\t\t\t\t<div class=\"observations-${me.data.observation.name} observs\"\n\t\t\t\t\t\tstyle=\"border: 1px solid var(--border-color);\n\t\t\t\t\t\tpadding-right: 0;\n\t\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\t\tmargin-right: 15px;\n\t\t\t\t\t\tborder-radius: var(--border-radius-md);\n\t\t\t\t\t\tbackground-color: var(--fg-color);\n\t\t\t\t\t\tbox-shadow: var(--card-shadow);\"\n\t\t\t\t\t\tvalue=${me.data.observation.name}>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`)\n\t\t\tif (me.data.observation.name) {\n\t\t\tvar obs_data = me.data.observation\n\t\t\tme.init_field_group(obs_data, me.wrapper.find(`.observations-${me.data.observation.name}`))\n\t\t\tme.$widget = me.wrapper.find(`.grouped-obs`)\n\t\t\t}\n\t\t}\n\t\tme.$widget = me.wrapper.find(`.grouped-obs`)\n\t\tvar authbutton = document.getElementById(`authorise-observation-btn-${me.data.observation}`);\n\t\tif (authbutton) {\n\t\t\tauthbutton.addEventListener(\"click\", function() {\n\t\t\t\tme.auth_observation(me.data.observation, btn_action)\n\t\t\t});\n\t\t}\n\t}\n\n\tinit_field_group(obs_data, wrapper) {\n\t\tvar me = this;\n\t\tvar default_input = \"\"\n\t\tif( ['Range', 'Ratio', 'Quantity', 'Numeric'].includes(obs_data.permitted_data_type)) {\n\t\t\tdefault_input = obs_data.result_data\n\n\t\t} else if (obs_data.permitted_data_type=='Text') {\n\t\t\tdefault_input = trim_html(obs_data.result_text)\n\n\t\t}\n\t\tlet fieldtype = \"Data\"\n\t\tlet options = \"\"\n\t\tif (obs_data.permitted_data_type=='Select') {\n\t\t\tfieldtype = \"Select\"\n\t\t\toptions = obs_data.options\n\t\t\tdefault_input = obs_data.result_select\n\t\t}\n\t\tme[obs_data.name] = new frappe.ui.FieldGroup({\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'observation',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'note_button',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'specimen',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'result',\n\t\t\t\t\tfieldtype: fieldtype,\n\t\t\t\t\toptions: options,\n\t\t\t\t\tread_only: 1 ? (obs_data.status=='Approved') : 0,\n\t\t\t\t\tchange: (s) => {\n\t\t\t\t\t\tme.frm.dirty()\n\t\t\t\t\t\tme.set_result_n_name(obs_data.name)\n\t\t\t\t\t},\n\t\t\t\t\tdefault: default_input,\n\t\t\t\t\thidden: 1 ? obs_data.observation_category == \"Imaging\" : 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'result_date',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t\thidden: 1 ? obs_data.observation_category == \"Imaging\" : 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'unit',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'method',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'reference',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'auth_btn',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'note_text',\n\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\tread_only: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\thidden: 1 ? obs_data.observation_category != \"Imaging\" : 0,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Findings\"),\n\t\t\t\t\tfieldname: 'findings',\n\t\t\t\t\tfieldtype: 'Button',\n\t\t\t\t\tclick: () => me.add_finding_interpretation(obs_data, \"Findings\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'findings_text',\n\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\tread_only: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'fieldtype': 'Column Break',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Interpretation\"),\n\t\t\t\t\tfieldname: 'interpretation',\n\t\t\t\t\tfieldtype: 'Button',\n\t\t\t\t\tclick: () => me.add_finding_interpretation(obs_data, \"Interpretation\"),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'result_interpretation',\n\t\t\t\t\tfieldtype: 'Text',\n\t\t\t\t\tread_only: 1,\n\t\t\t\t},\n\n\t\t\t],\n\t\t\tbody: wrapper\n\t\t})\n\t\tme[obs_data.name].make();\n\t\tme.set_values(this, obs_data)\n\t}\n\n\tset_values(th, obs_data) {\n\t\tvar me = this;\n\t\tlet name_html = `<div class=\"observation-name obs-field\" style=\"font-size:10px; padding-top:20px;\" value=\"{{observation_details.observation.name}}\">\n\t\t\t<a href=\"/app/observation/${obs_data.name }\" title=\"${obs_data.name }\">`\n\t\tif (obs_data.preferred_display_name) {\n\t\t\tname_html += obs_data.preferred_display_name\n\t\t} else {\n\t\t\tname_html += obs_data.observation_template\n\t\t}\n\t\tname_html += `</a>\n\t\t<div>`\n\t\tme[obs_data.name].get_field('observation').html(name_html);\n\n\n\t\tlet specimen_html = `<div class=\"text-muted\" style=\"font-size:10px; padding-top:20px;\">`\n\t\tif (obs_data.specimen) {\n\t\t\tspecimen_html += `<a href=\"/app/specimen/{{ observation_details.observation.specimen }}\" title=\"{{ observation_details.observation.specimen }}\">`\n\t\t\tspecimen_html += obs_data.specimen + '</a>'\n\t\t}\n\t\tspecimen_html += `</div>\n\t\t\t<div class=\"text-muted\" style=\"font-size: 8px;\">`\n\t\t\tif (obs_data.received_time) {\n\t\t\t\tspecimen_html += frappe.datetime.global_date_format(obs_data.received_time)\n\t\t\t}\n\t\t\tspecimen_html += `</div>`\n\t\tme[obs_data.name].get_field('specimen').html(specimen_html);\n\n\t\tlet result_date_html = `<div class=\"text-muted\" style=\"font-size:8px; margin-top:-12px;\">${obs_data.time_of_result ? frappe.datetime.global_date_format(obs_data.time_of_result): \"\"}</div>`\n\t\tme[obs_data.name].get_field('result_date').html(result_date_html);\n\n\t\tlet method_html = `<div style=\"display:flex\"><div style=\"font-size:10px; padding-top:20px; padding-right:45px; width:10%;\">${obs_data.permitted_unit?obs_data.permitted_unit:\"\"}</div>`\n\n\n\t\tmethod_html+= `<div class=\"text-muted\" style=\"font-size:10px; padding-top:20px;\">`\n\t\tif (obs_data.method) {\n\t\t\tmethod_html += `${obs_data.method }`\n\t\t}\n\t\tmethod_html += `</div></div>`\n\t\tme[obs_data.name].get_field('unit').html(method_html);\n\n\n\t\tlet reference_html = `<div style=\"display:flex;\"><div class=\"text-muted\" style=\"font-size:10px; padding-top:20px;\">`\n\t\tif (obs_data.reference) {\n\t\t\treference_html += `${obs_data.reference }`\n\t\t}\n\t\treference_html += `</div>`\n\t\tme[obs_data.name].get_field('reference').html(reference_html);\n\n\t\tlet auth_html = \"\"\n\t\tif (!['Approved'].includes(obs_data.status)) {\n\t\t\tauth_html += `<div style=\"float:right;\">\n\t\t\t\t<button class=\"btn btn-xs btn-secondary small\" id=\"authorise-observation-btn-${obs_data.name}\">\n\t\t\t\t<span style=\"font-size:10px;\">Approve</span>\n\t\t\t\t</button>`\n\t\t\tauth_html += `</div></div>`\n\t\t\tme[obs_data.name].get_field('auth_btn').html(auth_html);\n\t\t\tvar authbutton = document.getElementById(`authorise-observation-btn-${obs_data.name}`);\n\t\t\tauthbutton.addEventListener(\"click\", function() {\n\t\t\t\tme.auth_observation(obs_data.name, \"Approved\")\n\t\t\t});\n\t\t} else if (obs_data.status=='Approved') {\n\t\t\tauth_html += `<div style=\"float:right;\">\n\t\t\t\t<button class=\"btn btn-xs btn-del btn-secondary small\" id=\"unauthorise-observation-btn-${obs_data.name}\">\n\t\t\t\t<span class=\"btn-observ\" style=\"font-size:10px;\">Reject</span>\n\t\t\t\t</button>`\n\t\t\tauth_html += `</div></div>`\n\t\t\tme[obs_data.name].get_field('auth_btn').html(auth_html);\n\t\t\tvar authbutton = document.getElementById(`unauthorise-observation-btn-${obs_data.name}`);\n\t\t\tauthbutton.addEventListener(\"click\", function() {\n\t\t\t\tme.auth_observation(obs_data.name, \"Rejected\")\n\t\t\t});\n\t\t}\n\n\t\tlet note_html = `<div><span class=\"add-note-observation-btn btn btn-link\"\n\t\t\tid=\"add-note-observation-btn-${obs_data.name}\">\n\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-small-message\"></use></svg>\n\t\t\t</span>`\n\t\tnote_html += `</div>`\n\t\tme[obs_data.name].get_field('note_button').html(note_html);\n\t\tvar myButton = document.getElementById(`add-note-observation-btn-${obs_data.name}`);\n\t\tmyButton.addEventListener(\"click\", function() {\n\t\t\tme.add_note(obs_data.name, obs_data.note)\n\t\t  });\n\n\t\tif (obs_data.note) {\n\t\t\tme[obs_data.name].set_value(\"note_text\", obs_data.note)\n\t\t}\n\n\t\tif (obs_data.observation_category == \"Imaging\") {\n\t\t\tme[obs_data.name].set_value(\"findings_text\", obs_data.result_text)\n\t\t\tme[obs_data.name].set_value(\"result_interpretation\", obs_data.result_interpretation)\n\t\t}\n\n\t}\n\n\tset_result_n_name(observation) {\n\t\tvar me = this;\n\t\tlet dialog_values = me[observation].get_values();\n\t\tdialog_values[\"observation\"] =  observation\n\t\tlet valuexists = me.result.some(dict => dict.observation === observation);\n\t\tfor (var res of me.result) {\n\t\t\tif (observation == res.observation) {\n\t\t\t\tres[\"result\"] = dialog_values.result\n\t\t\t}\n\t\t}\n\t\tif (!valuexists) {\n\t\t\tme.result.push(dialog_values)\n\t\t}\n\t}\n\n\tadd_note (observation, note) {\n\t\tvar me = this;\n\t\tlet observation_name = observation;\n\t\tlet note_text = me[observation].get_value('note_text') || note\n\t\t// let result = note;\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Add Note'),\n\t\t\t\tstatic: true,\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": __(\"Observation\"),\n\t\t\t\t\t\t\"fieldname\": \"observation\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"Observation\",\n\t\t\t\t\t\t\"default\": observation_name,\n\t\t\t\t\t\t\"hidden\": 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": __(\"Note\"),\n\t\t\t\t\t\t\"fieldname\": \"note\",\n\t\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\t\"default\": note_text,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tme.frm.dirty()\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tme[observation].set_value(\"note_text\", data.note)\n\t\t\t\t\tif (me.result.length > 0) {\n\t\t\t\t\t\tme.result.forEach(function(res) {\n\t\t\t\t\t\tif (res.observation == observation) {\n\t\t\t\t\t\t\tres[\"note\"] =  data.note\n\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme.result.push({\"observation\": observation, \"note\": data.note})\n\t\t\t\t\t}\n\t\t\t\t\td.hide();\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __(\"Add Note\")\n\t\t\t});\n\t\t\td.show();\n\t\t\td.get_close_btn().show();\n\t}\n\n\tauth_observation (observation, status) {\n\t\tvar me = this;\n\t\tif (status == \"Approved\") {\n\t\t\tfrappe.confirm(__(\"Are you sure you want to authorise Observation <b>\" + observation +\"</b>\"), function () {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: 'shifaa.shifaa.doctype.observation.observation.set_observation_status',\n\t\t\t\t\targs: {\n\t\t\t\t\t\tobservation: observation,\n\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\tme.frm.reload_doc();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t} else if (status == \"Rejected\") {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Reason For Rejection'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": __(\"Reason\"),\n\t\t\t\t\t\t\"fieldname\": \"unauthorisation_reason\",\n\t\t\t\t\t\t\"fieldtype\": \"Text\",\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.observation.observation.set_observation_status\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tobservation: observation,\n\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\treason: data.unauthorisation_reason,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.frm.reload_doc();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __(\"Reject\")\n\t\t\t});\n\t\t\td.show()\n\t\t}\n\n\t}\n\n\tadd_finding_interpretation (obs_data, type) {\n\t\tvar me = this;\n\t\tlet template = \"\"\n\t\tlet note = \"\"\n\t\tif (type==\"Findings\") {\n\t\t\ttemplate = obs_data.result_template\n\t\t\tnote = me[obs_data.name].get_value('result_text') || obs_data.result_text\n\t\t} else if (type==\"Interpretation\") {\n\t\t\ttemplate = obs_data.interpretation_template\n\t\t\tnote = me[obs_data.name].get_value('result_interpretation') || obs_data.result_interpretation\n\t\t}\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __(type),\n\t\t\tstatic: true,\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\t\"label\": \"Observation\",\n\t\t\t\t\t\"fieldname\": \"observation\",\n\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\"options\": \"Observation\",\n\t\t\t\t\t\"default\": obs_data.name,\n\t\t\t\t\t\"hidden\": 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"label\": \"Template\",\n\t\t\t\t\t\"fieldname\": \"template\",\n\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\"options\": \"Terms and Conditions\",\n\t\t\t\t\t\"default\": template,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"label\": \"Note\",\n\t\t\t\t\t\"fieldname\": \"note\",\n\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\"default\" : note,\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action: function() {\n\t\t\t\tme.frm.dirty()\n\t\t\t\tvar data = d.get_values();\n\t\t\t\tlet val_dict = {};\n\t\t\t\tvar values = [];\n\t\t\t\tval_dict[\"observation\"] = obs_data.name\n\t\t\t\tval_dict[\"result\"] = \"\"\n\t\t\t\tif (type==\"Findings\") {\n\t\t\t\t\tval_dict[\"result\"] = data.note\n\t\t\t\t\tme[obs_data.name].set_value(\"findings_text\", data.note)\n\t\t\t\t} else if (type==\"Interpretation\") {\n\t\t\t\t\tval_dict[\"interpretation\"] = data.note\n\t\t\t\t\tme[obs_data.name].set_value(\"result_interpretation\", data.note)\n\t\t\t\t}\n\t\t\t\td.hide();\n\t\t\t\tvalues.push(val_dict);\n\t\t\t\tme.result.push(val_dict)\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Add\")\n\t\t\t});\n\t\t\tif ((!note || note == \"\") && d.get_values(\"template\")) {\n\t\t\t\tset_text_to_dialog(d)\n\t\t\t}\n\t\t\td.fields_dict['template'].df.onchange = () => {\n\t\t\t\tconst regex = /<p>(.*?)<\\/p>/;\n\t\t\t\tconst match = d.get_value(\"note\").match(regex);\n\t\t\t\tconst result_value = match ? match[1] : null;\n\t\t\t\tif (d.get_value('template') && (!result_value || result_value == \"<br>\")) {\n\t\t\t\t\tset_text_to_dialog(d)\n\t\t\t\t}\n\t\t\t}\n\t\t\td.show();\n\t\t\td.get_close_btn().show();\n\t}\n\n}\n\nvar trim_html = function(text_result) {\n\tif (text_result && text_result.includes('</div>')) {\n\t\tvar tempElement = document.createElement('div');\n\t\ttempElement.innerHTML = text_result;\n\t\tvar paragraphElement = tempElement.querySelector('p');\n\t\treturn paragraphElement.textContent\n\t} else {\n\t\treturn text_result\n\t}\n}\n\nvar set_text_to_dialog = function(d) {\n\tif (d.get_value(\"template\")) {\n\t\tfrappe.call({\n\t\t\tmethod: 'shifaa.shifaa.doctype.observation.observation.get_observation_result_template',\n\t\t\targs: {\n\t\t\t\ttemplate_name: d.get_value(\"template\"),\n\t\t\t\tobservation: d.get_value(\"observation\")\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\td.set_value('note', r.message)\n\t\t\t}\n\t\t});\n\t}\n}", "frappe.provide(\"shifaa\");\n\nshifaa.ClinicalNotes = class ClinicalNotes {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\trefresh() {\n\t\tvar me = this;\n\t\tthis.notes_wrapper.find('.clinical-notes-section').remove();\n\t\tfrappe.run_serially([\n\t\t\t() => frappe.call({\n\t\t\t\tmethod: \"get_clinical_notes\",\n\t\t\t\tdoc: me.frm.doc,\n\t\t\t\targs: {\n\t\t\t\t\tpatient: me.frm.doc.patient\n\t\t\t\t},\n\t\t\t\tfreeze: true,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tlet clinical_notes = r.message || [];\n\t\t\t\t\t// notes.sort(\n\t\t\t\t\t// \tfunction(a, b) {\n\t\t\t\t\t// \t\treturn new Date(b.added_on) - new Date(a.added_on);\n\t\t\t\t\t// \t}\n\t\t\t\t\t// );\n\n\t\t\t\t\tlet clinical_notes_html = frappe.render_template(\n\t\t\t\t\t\t'shifaa_note',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclinical_notes: clinical_notes\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\t$(clinical_notes_html).appendTo(me.notes_wrapper);\n\t\t\t\t}\n\t\t\t}),\n\t\t\t() => {\n\t\t\t\tme.add_clinical_note();\n\t\t\t\t$(\".clinical-notes-section\").find(\".edit-note-btn\").on(\"click\", function() {\n\t\t\t\t\tme.edit_clinical_note(this);\n\t\t\t\t});\n\t\t\t\t$(\".clinical-notes-section\").find(\".delete-note-btn\").on(\"click\", function() {\n\t\t\t\t\tme.delete_clinical_note(this);\n\t\t\t\t});\n\t\t\t}\n\t\t])\n\t}\n\n\n\tadd_clinical_note () {\n\t\tlet me = this;\n\t\tlet _add_clinical_note = () => {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Add Clinical Note'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Clinical Note Type\",\n\t\t\t\t\t\t\"fieldname\": \"note_type\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"Clinical Note Type\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Note\",\n\t\t\t\t\t\t\"fieldname\": \"note\",\n\t\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\t\"reqd\": 1,\n\t\t\t\t\t\t\"enable_mentions\": true,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"add_clinical_note\",\n\t\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tnote: data.note,\n\t\t\t\t\t\t\tnote_type: data.note_type\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Add')\n\t\t\t});\n\t\t\td.show();\n\t\t};\n\t\t$(\".new-note-btn\").click(_add_clinical_note);\n\t}\n\n\tedit_clinical_note (edit_btn) {\n\t\tvar me = this;\n\t\tlet row = $(edit_btn).closest('.comment-content');\n\t\tlet note_name = row.attr(\"name\");\n\t\tlet note_type = $(row).find(\".note-type\").html().trim();\n\t\tlet row_content = $(row).find(\".content\").html();\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit Clinical Note'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Clinical Note Type\",\n\t\t\t\t\t\t\"fieldname\": \"note_type\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"Clinical Note Type\",\n\t\t\t\t\t\t\"default\": note_type,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Note\",\n\t\t\t\t\t\t\"fieldname\": \"note\",\n\t\t\t\t\t\t\"fieldtype\": \"Text Editor\",\n\t\t\t\t\t\t\"default\": row_content,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"edit_clinical_note\",\n\t\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tnote: data.note,\n\t\t\t\t\t\t\tnote_name: note_name\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Done')\n\t\t\t});\n\t\t\td.show();\n\t}\n\n\tdelete_clinical_note (delete_btn) {\n\t\tvar me = this;\n\t\tlet note_name = $(delete_btn).closest('.comment-content').attr(\"name\");\n\t\tfrappe.confirm('Are you sure you want to proceed?',\n\t\t\t() => {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"delete_clinical_note\",\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\targs: {\n\t\t\t\t\t\tnote_name: note_name\n\t\t\t\t\t},\n\t\t\t\t\tfreeze: true,\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t}\n};\n\nshifaa.Orders = class Orders {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\trefresh() {\n\t\tvar me = this;\n\t\t$(this.open_activities_wrapper).empty();\n\t\tlet cur_form_footer = this.form_wrapper.find('.form-footer');\n\n\t\tfrappe.call({\n\t\t\tmethod: \"shifaa.shifaa.doctype.patient_encounter.patient_encounter.get_encounter_details\",\n\t\t\targs: {\n\t\t\t\t\"doc\": me.frm.doc,\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tvar activities_html = frappe.render_template('shifaa_orders', {\n\t\t\t\t\t\tservice_requests: r.message[1],\n\t\t\t\t\t\tmedication_requests: r.message[0],\n\t\t\t\t\t\tstatus_code_map: r.message[3],\n\t\t\t\t\t\tcreate_orders: me.create_orders,\n\t\t\t\t\t\tshow_encounter: this.show_encounter\n\t\t\t\t});\n\n\t\t\t\t\t$(activities_html).appendTo(me.open_activities_wrapper);\n\n\t\t\t\t\t$(\".service-request\").find(\".service-request-onhold\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Service Request\", \"On Hold\");\n\t\t\t\t\t});\n\t\t\t\t\t$(\".service-request\").find(\".service-request-active\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Service Request\", \"Active\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".service-request\").find(\".order-cancel\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Service Request\", \"Cancel\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".service-request\").find(\".service-request-replace\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Service Request\", \"Replaced\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".medication-request\").find(\".service-request-onhold\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Medication Request\", \"On Hold\");\n\t\t\t\t\t});\n\t\t\t\t\t$(\".medication-request\").find(\".service-request-active\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Medication Request\", \"Active\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".medication-request\").find(\".order-cancel\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Medication Request\", \"Cancel\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".medication-request\").find(\".service-request-replace\").on(\"click\", function() {\n\t\t\t\t\t\tme.update_status(this, \"Medication Request\", \"Replaced\");\n\t\t\t\t\t\tme.create_medication_request();\n\t\t\t\t\t});\n\n\t\t\t\t\tme.create_service_request();\n\t\t\t\t\tme.create_medication_request();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcreate_service_request () {\n\t\tlet me = this;\n\t\tlet _create_service_request = () => {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Create Service Request'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Order Template Type\",\n\t\t\t\t\t\t\"fieldname\": \"order_template_type\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"options\": \"DocType\",\n\t\t\t\t\t\t\"reqd\": 1,\n\t\t\t\t\t\tget_query: () => {\n\t\t\t\t\t\t\tlet order_template_doctypes = [\n\t\t\t\t\t\t\t\t\"Therapy Type\",\n\t\t\t\t\t\t\t\t\"Lab Test Template\",\n\t\t\t\t\t\t\t\t\"Clinical Procedure Template\",\n\t\t\t\t\t\t\t\t\"Observation Template\",\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\t\tname: ['in', order_template_doctypes]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"label\": \"Order Template\",\n\t\t\t\t\t\t\"fieldname\": \"order_template\",\n\t\t\t\t\t\t\"fieldtype\": \"Dynamic Link\",\n\t\t\t\t\t\t\"options\": \"order_template_type\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.order_template_type;\",\n\t\t\t\t\t\t\"reqd\": 1,\n\t\t\t\t\t\tonchange: function(frm) {\n\t\t\t\t\t\t\tlet field_name = (d.get_value(\"order_template_type\") == \"Lab Test Template\") ? \"department\" : \"medical_department\";\n\t\t\t\t\t\t\tfrappe.db.get_value(d.get_value(\"order_template_type\"), d.get_value(\"order_template\"), field_name)\n\t\t\t\t\t\t\t.then(r => {\n\t\t\t\t\t\t\t  if (r.message) {\n\t\t\t\t\t\t\t\td.set_value(\"department\", r.message[field_name]);\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"department\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Department\",\n\t\t\t\t\t\t\"options\": \"Medical Department\",\n\t\t\t\t\t\t\"depends_on\": \"eval: doc.order_template\",\n\t\t\t\t\t\t\"read_only\": 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"column_break_4\",\n\t\t\t\t\t\t\"fieldtype\": \"Column Break\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.order_template_type=='Lab Test Template';\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"practitioner\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Referred to Practitioner\",\n\t\t\t\t\t\t\"options\": \"Shifaa Practitioner\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.order_template_type=='Clinical Procedure Template';\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"date\",\n\t\t\t\t\t\t\"fieldtype\": \"Date\",\n\t\t\t\t\t\t\"label\": \"Date\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.order_template_type=='Clinical Procedure Template';\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"description\",\n\t\t\t\t\t\t\"fieldtype\": \"Small Text\",\n\t\t\t\t\t\t\"label\": \"Comments\",\n\t\t\t\t\t\t\"depends_on\": \"eval:['Lab Test Template', 'Clinical Procedure Template'].includes(doc.order_template_type);\",\n\t\t\t\t\t},\n\t\t\t\t\t// therapy\n\t\t\t\t\t   {\n\t\t\t\t\t\t\"fieldname\": \"no_of_sessions\",\n\t\t\t\t\t\t\"fieldtype\": \"Int\",\n\t\t\t\t\t\t\"label\": \"No of Sessions\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.order_template_type=='Therapy Type';\",\n\t\t\t\t\t   },\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.patient_encounter.patient_encounter.create_service_request_from_widget\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tencounter: me.frm.doc.name,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __(\"Create\")\n\t\t\t});\n\t\t\td.show();\n\t\t};\n\t\t$(\".new-service-request-btn\").click(_create_service_request);\n\t}\n\n\tcreate_medication_request () {\n\t\tlet me = this;\n\t\tlet _create_medication_request = () => {\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Create Medication Request'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"medication\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"in_list_view\": 1,\n\t\t\t\t\t\t\"label\": \"Medication\",\n\t\t\t\t\t\t\"options\": \"Medication\",\n\t\t\t\t\t\tonchange: function(e) {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.patient_encounter.patient_encounter.get_medications\",\n\t\t\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\tmedication: d.get_value(\"medication\")\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t\t\t\tif (r.message.length == 1) {\n\t\t\t\t\t\t\t\t\t\t\td.set_value(\"drug_code\", r.message[0].item)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (r.message.length > 1) {\n\t\t\t\t\t\t\t\t\t\t\td.set_value(\"drug_code\", \"\")\n\t\t\t\t\t\t\t\t\t\t\tvar drug_list = r.message.map(({ item }) => item);\n\t\t\t\t\t\t\t\t\t\t\td.fields_dict['drug_code'].get_query = function() {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: [\"in\", drug_list]\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tfrappe.db.get_value(\"Medication\", d.get_value(\"medication\"),\n\t\t\t\t\t\t\t\t[\"default_prescription_dosage\", \"default_prescription_duration\",\n\t\t\t\t\t\t\t\t\"dosage_form\", \"default_interval\", \"default_interval_uom\", \"strength\", \"strength_uom\"])\n\t\t\t\t\t\t\t.then(r => {\n\t\t\t\t\t\t\t\tlet values = r.message;\n\t\t\t\t\t\t\t\td.set_values({\n\t\t\t\t\t\t\t\t\t\"dosage\": values.default_prescription_dosage,\n\t\t\t\t\t\t\t\t\t\"period\": values.default_prescription_duration,\n\t\t\t\t\t\t\t\t\t\"dosage_form\": values.dosage_form,\n\t\t\t\t\t\t\t\t\t\"interval\": values.default_interval,\n\t\t\t\t\t\t\t\t\t\"interval_uom\": values.default_interval_uom,\n\t\t\t\t\t\t\t\t\t\"strength\": values.strength,\n\t\t\t\t\t\t\t\t\t\"strength_uom\": values.strength_uom\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"drug_code\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"ignore_user_permissions\": 1,\n\t\t\t\t\t\t\"label\": \"Drug Code\",\n\t\t\t\t\t\t\"options\": \"Item\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fetch_from\": \"medication.default_prescription_duration\",\n\t\t\t\t\t\t\"fieldname\": \"period\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Period\",\n\t\t\t\t\t\t\"options\": \"Prescription Duration\",\n\t\t\t\t\t\t\"reqd\": 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fetch_from\": \"medication.dosage_form\",\n\t\t\t\t\t\t\"fieldname\": \"dosage_form\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Dosage Form\",\n\t\t\t\t\t\t\"options\": \"Dosage Form\",\n\t\t\t\t\t\t\"reqd\": 1\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"depends_on\": \"eval:!doc.dosage_by_interval\",\n\t\t\t\t\t\t\"fetch_from\": \"medication.default_prescription_dosage\",\n\t\t\t\t\t\t\"fieldname\": \"dosage\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Dosage\",\n\t\t\t\t\t\t\"mandatory_depends_on\": \"eval:!doc.dosage_by_interval\",\n\t\t\t\t\t\t\"options\": \"Prescription Dosage\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"column_break_7\",\n\t\t\t\t\t\t\"fieldtype\": \"Column Break\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"description\",\n\t\t\t\t\t\t\"fieldtype\": \"Small Text\",\n\t\t\t\t\t\t\"label\": \"Comment\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fetch_from\": \"medication.strength\",\n\t\t\t\t\t\t\"fieldname\": \"strength\",\n\t\t\t\t\t\t\"fieldtype\": \"Float\",\n\t\t\t\t\t\t\"label\": \"Strength\",\n\t\t\t\t\t\t\"read_only_depends_on\": \"eval: doc.medication\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"depends_on\": \"strength\",\n\t\t\t\t\t\t\"fetch_from\": \"medication.strength_uom\",\n\t\t\t\t\t\t\"fieldname\": \"strength_uom\",\n\t\t\t\t\t\t\"fieldtype\": \"Link\",\n\t\t\t\t\t\t\"label\": \"Strength UOM\",\n\t\t\t\t\t\t\"options\": \"UOM\",\n\t\t\t\t\t\t\"read_only_depends_on\": \"eval: doc.medication\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"number_of_repeats_allowed\",\n\t\t\t\t\t\t\"fieldtype\": \"Float\",\n\t\t\t\t\t\t\"label\": \"Number Of Repeats Allowed\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"default\": \"0\",\n\t\t\t\t\t\t\"fieldname\": \"dosage_by_interval\",\n\t\t\t\t\t\t\"fieldtype\": \"Check\",\n\t\t\t\t\t\t\"label\": \"Dosage by Time Interval\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"fieldname\": \"section_break_7\",\n\t\t\t\t\t\t\"fieldtype\": \"Section Break\",\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.dosage_by_interval\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.dosage_by_interval\",\n\t\t\t\t\t\t\"fetch_from\": \"medication.default_interval\",\n\t\t\t\t\t\t\"fieldname\": \"interval\",\n\t\t\t\t\t\t\"fieldtype\": \"Int\",\n\t\t\t\t\t\t\"label\": \"Interval\",\n\t\t\t\t\t\t\"mandatory_depends_on\": \"eval:doc.dosage_by_interval\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"depends_on\": \"eval:doc.dosage_by_interval\",\n\t\t\t\t\t\t\"fetch_from\": \"medication.default_interval_uom\",\n\t\t\t\t\t\t\"fieldname\": \"interval_uom\",\n\t\t\t\t\t\t\"fieldtype\": \"Select\",\n\t\t\t\t\t\t\"label\": \"Interval UOM\",\n\t\t\t\t\t\t\"mandatory_depends_on\": \"eval:doc.dosage_by_interval\",\n\t\t\t\t\t\t\"options\": \"\\nHour\\nDay\"\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tprimary_action: function() {\n\t\t\t\t\tvar data = d.get_values();\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.patient_encounter.patient_encounter.create_service_request_from_widget\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tencounter: me.frm.doc.name,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tmedication_request: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __(\"Create\")\n\t\t\t});\n\t\t\td.show();\n\n\t\t};\n\t\t$(\".new-medication-btn\").click(_create_medication_request);\n\t}\n\n\tasync update_status (status_btn, doctype, status) {\n\t\tlet me = this;\n\t\tlet row = \"\"\n\t\tif (doctype == \"Service Request\") {\n\t\t\trow = $(status_btn).closest('.service-request')\n\t\t} else {\n\t\t\trow = $(status_btn).closest('.medication-request')\n\t\t}\n\t\tlet order_name = row.attr(\"name\");\n\t\tif (status == \"Cancel\") {\n\t\t\tfrappe.confirm('Are you sure you want to proceed?',\n\t\t\t() => {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"shifaa.shifaa.doctype.patient_encounter.patient_encounter.cancel_request\",\n\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tdoctype: doctype,\n\t\t\t\t\t\t\trequest: order_name\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\tif (r && !r.exc) {\n\t\t\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\tawait frappe.db.set_value(doctype, order_name, \"status\", status);\n\t\t\tme.refresh();\n\t\t}\n\t}\n};", "\n\tfrappe.templates['shifaa_note'] = `<div class=\"clinical-notes-section col-xs-12\">\n\t<div class=\"new-btn pb-3\">\n\t\t<button class=\"btn btn-sm small new-note-btn mr-1\">\n\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t<use href=\"#icon-add\"></use>\n\t\t\t</svg>\n\t\t\t{{ __(\"New Clinical Note\") }}\n\t\t</button>\n\t</div>\n\t<div class=\"all-clinical-notes\">\n\t\t{% if (clinical_notes.length) { %}\n\t\t\t{% for(var i=0, l=clinical_notes.length; i<l; i++) { %}\n\t\t\t\t<div class=\"comment-content p-3 row\" name=\"{{ clinical_notes[i].name }}\">\n\t\t\t\t\t<div class=\"mb-2 head col-xs-3\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-xs-2\">\n\t\t\t\t\t\t\t\t{{ frappe.avatar(clinical_notes[i].user) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-xs-10\">\n\t\t\t\t\t\t\t\t<div class=\"mr-2 title font-weight-bold\">\n\t\t\t\t\t\t\t\t\t{{ strip_html(clinical_notes[i].added_by) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"time small text-muted\">\n\t\t\t\t\t\t\t\t\t{{ frappe.datetime.global_date_format(clinical_notes[i].posting_date) }}<br>\n\t\t\t\t\t\t\t\t\t{{ clinical_notes[i].practitioner }}<br>\n\t\t\t\t\t\t\t\t\t<div class=\"note-type\">\n\t\t\t\t\t\t\t\t\t\t{{ clinical_notes[i].clinical_note_type }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"content col-xs-8\">\n\t\t\t\t\t\t{{ clinical_notes[i].note }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-xs-1 text-right\">\n\t\t\t\t\t\t<span class=\"edit-note-btn btn btn-link\">\n\t\t\t\t\t\t\t<svg class=\"icon icon-sm\"><use xlink:href=\"#icon-edit\"></use></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"delete-note-btn  btn btn-link pl-2\">\n\t\t\t\t\t\t\t<svg class=\"icon icon-xs\"><use xlink:href=\"#icon-delete\"></use></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{% } %}\n\t\t{% } else { %}\n            <div class=\"no-clinical-notes text-muted pt-6\">\n                {{ __(\"No Clinical Notes\") }}\n            </div>\n\t\t    {% } %}\n\t</div>\n</div>\n\n<style>\n\n.comment-content {\n    border: 1px solid var(--border-color);\n\tborder-bottom: none;\n}\n\n.comment-content:last-child {\n    border-bottom: 1px solid var(--border-color);\n}\n\n.new-btn {\n\ttext-align: right;\n}\n\n.clinical-notes-section .no-clinical-notes {\n\tmin-height: 100px;\n\ttext-align: center;\n}\n\n.clinical-notes-section .btn {\n\tpadding: 0.2rem 0.2rem;\n}\n\n</style>`;\n", "\n\tfrappe.templates['shifaa_orders'] = `<div class=\"orders\">\n\t<div class=\"new-btn pb-3\">\n\t\t{% if (create_orders) { %}\n\t\t<span>\n\t\t\t<button class=\"btn btn-sm small new-service-request-btn mr-1\">\n\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t<use href=\"#icon-add\"></use>\n\t\t\t\t</svg>\n\t\t\t\t{{ __(\"New Service Request\") }}\n\t\t\t</button>\n\t\t\t<button class=\"btn btn-sm small new-medication-btn\">\n\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t<use href=\"#icon-add\"></use>\n\t\t\t\t</svg>\n\t\t\t\t{{ __(\"New Medication Request\") }}\n\t\t\t</button>\n\t\t</span>\n\t\t{% } %}\n\t</div>\n\t<div class=\"section-body\">\n\t\t<div class=\"service-requests pr-1\">\n\t\t\t<div class=\"open-section-head\">\n\t\t\t\t<span class=\"ml-2\">{{ __(\"Service Requests\") }}</span>\n\t\t\t</div>\n\t\t\t{% if (service_requests && service_requests.length) { %}\n\t\t\t\t{% for(var i=0, l=service_requests.length; i<l; i++) { %}\n\t\t\t\t\t<div class=\"service-request\" name=\"{{ service_requests[i].name }}\">\n\t\t\t\t\t\t<div class=\"flex justify-between\">\n\t\t\t\t\t\t\t<div class=\"row label-area font-md ml-1\">\n\t\t\t\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t\t\t\t\t\t<use href=\"#icon-menu\"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<a href=\"/app/service-request/{{ service_requests[i].name }}\" title=\"{{ __('Service Requests') }}\">\n\t\t\t\t\t\t\t\t\t{%= service_requests[i].name %}\n\t\t\t\t\t\t\t\t</a> - <span style=\"font-size: 10px;\">{{service_requests[i].order_group}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"colo-sm-2\" style=\"float:right; padding-right:10px; padding-top:10px; padding-bottom:10px;\">\n\t\t\t\t\t\t\t\t{% if(service_requests[i].billing_status==\"Invoiced\") { %}\n\t\t\t\t\t\t\t\t\t<div class=\"invoiced\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Invoiced\") }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t<button data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" class=\"btn btn-xs btn-secondary order-btn\">\n\t\t\t\t\t\t\t\t\t{%= status_code_map[service_requests[i].status] %}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<ul class=\"dropdown-menu dropdown-menu-right\"\n\t\t\t\t\t\t\t\t\tstyle=\"position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-172px, 26px, 0px);\"\n\t\t\t\t\t\t\t\t\tx-placement=\"bottom-end\">\n\t\t\t\t\t\t\t\t\t{% if(service_requests[i].status == \"Active\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-onhold\" data-action=\"on-hold\">{{ __(\"On Hold\") }}</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-replace\" data-action=\"replace\">{{ __(\"Replace\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } else if (service_requests[i].status == \"On Hold\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-active\" data-action=\"active\">{{ __(\"Active\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t{% if(service_requests[i].docstatus == 1 && service_requests[i].status == \"Active\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item order-cancel\" data-action=\"cancel\">{{ __(\"Cancel\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"service-request-details row\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t<div class=\"mb-2 head col-xs-3\">\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-xs-2\">\n\t\t\t\t\t\t\t\t\t\t{{ frappe.avatar(service_requests[i].practitioner_email) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-xs-10\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"time small text-muted\">\n\t\t\t\t\t\t\t\t\t\t\t{{ frappe.datetime.global_date_format(service_requests[i].order_date) }} {{ service_requests[i].order_time }}<br>\n\t\t\t\t\t\t\t\t\t\t\t{{ service_requests[i].practitioner_name }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t <div style=\"padding-bottom:20px; padding-left:30px; padding-right:10px;\">\n\t\t\t\t\t\t\t\t{% if(service_requests[i].template_dt) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Order Type:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= service_requests[i].template_dt %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t{% if(service_requests[i].template_dn) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Order Name:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= service_requests[i].template_dn %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{% if(service_requests[i].lab_details) { %}\n\t\t\t\t\t\t<div class=\"text-muted lab-details\">\n\t\t\t\t\t\t\t{%= service_requests[i].lab_details %}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{% } %}\n\t\t\t\t</div>\n\t\t\t    {% } %}\n            {% } else { %}\n\t\t\t<div class=\"no-orders text-muted\">\n                    {{ __(\"No Service Requests\") }}\n                </div>\n\t\t    {% } %}\n\t\t</div>\n\t\t<div class=\"medication-requests pr-1\">\n\t\t\t<div class=\"open-section-head\">\n\t\t\t\t<span class=\"ml-2\">{{ __(\"Medication Requests\") }}</span>\n\t\t\t</div>\n\t\t\t{% if (medication_requests && medication_requests.length) { %}\n\t\t\t\t{% for(var i=0, l=medication_requests.length; i<l; i++) { %}\n\t\t\t\t\t<div class=\"medication-request\" name=\"{{ medication_requests[i].name }}\">\n\t\t\t\t\t\t<div class=\"flex justify-between\">\n\t\t\t\t\t\t\t<div class=\"row label-area font-md ml-1\">\n\t\t\t\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t\t\t\t\t\t<use href=\"#icon-menu\"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<a href=\"/app/medication-request/{{ medication_requests[i].name }}\" title=\"{{ __('Medication Requests') }}\">\n\t\t\t\t\t\t\t\t\t{%= medication_requests[i].name %}\n\t\t\t\t\t\t\t\t</a> - <span style=\"font-size: 10px;\">{{medication_requests[i].order_group}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"colo-sm-2\" style=\"float:right; padding-right:10px; padding-top:10px; padding-bottom:10px;\">\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].billing_status==\"Invoiced\") { %}\n\t\t\t\t\t\t\t\t\t<div class= \"invoiced\" style=\"float: left; padding-right: 10px;\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Invoiced\") }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t<button data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" class=\"btn btn-xs btn-secondary order-btn\">\n\t\t\t\t\t\t\t\t\t{%= status_code_map[service_requests[i].status] %}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<ul class=\"dropdown-menu dropdown-menu-right\"\n\t\t\t\t\t\t\t\t\tstyle=\"position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-172px, 26px, 0px);\"\n\t\t\t\t\t\t\t\t\tx-placement=\"bottom-end\">\n\t\t\t\t\t\t\t\t\t{% if(medication_requests[i].status == \"Active\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-onhold\" data-action=\"on-hold\">{{ __(\"On Hold\") }}</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-replace\" data-action=\"replace\">{{ __(\"Replace\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } else if (medication_requests[i].status == \"On Hold\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item service-request-active\" data-action=\"active\">{{ __(\"Active\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t\t{% if(medication_requests[i].docstatus == 1 && medication_requests[i].status == \"Active\") { %}\n\t\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item order-cancel\" data-action=\"cancel\">{{ __(\"Cancel\") }}</a></li>\n\t\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"medication-request-details row\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t<div class=\"mb-2 head col-xs-3\">\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-xs-2\">\n\t\t\t\t\t\t\t\t\t\t{{ frappe.avatar(medication_requests[i].practitioner_email) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-xs-10\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"time small text-muted\">\n\t\t\t\t\t\t\t\t\t\t\t{{ frappe.datetime.global_date_format(medication_requests[i].order_date) }}-{{medication_requests[i].order_time}}<br>\n\t\t\t\t\t\t\t\t\t\t\t{{ medication_requests[i].practitioner_name }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"padding-bottom:20px; padding-right:10px;\">\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].medication) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Medication:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= medication_requests[i].medication %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].period) { %}\n\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t{{ __(\"Period:\") }}\n\t\t\t\t\t\t\t\t\t<b>{%= medication_requests[i].period %}</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t <div style=\"padding-bottom:20px; padding-left:30px; padding-right:10px;\">\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].dosage_form) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Dosage Form:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= medication_requests[i].dosage_form %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].dosage) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Dosage:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= medication_requests[i].dosage %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t <div style=\"padding-bottom:20px; padding-left:30px; padding-right:10px;\">\n\t\t\t\t\t\t\t\t{% if(medication_requests[i].quantity) { %}\n\t\t\t\t\t\t\t\t\t<div class=\"text-muted  ml-1\">\n\t\t\t\t\t\t\t\t\t\t{{ __(\"Quantity:\") }}\n\t\t\t\t\t\t\t\t\t\t<b>{%= medication_requests[i].quantity %}</b>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    {% } %}\n            {% } else { %}\n\t\t\t<div class=\"no-orders text-muted\">\n                    {{ __(\"No Medication Requests\") }}\n                </div>\n\t\t    {% } %}\n\t\t</div>\n</div>\n\n\n<style>\n.orders {\n\tmin-height: 50px;\n\tpadding-left: 0px;\n\tpadding-bottom: 15px !important;\n}\n\n.orders .new-btn {\n\ttext-align: right;\n}\n\n.service-request, .medication-request {\n\tmin-height: 90px;\n\tborder: 1px solid var(--border-color);\n\tpadding-right: 0;\n\tfont-size: 11px;\n\tpadding-left: 5px;\n\tpadding-top: 10px;\n}\n\n.single-activity:last-child {\n\tborder-bottom: 1px solid var(--border-color);\n}\n\n.checkbox {\n\tmin-width: 22px;\n}\n\n.service-requests {\n\twidth: 100%;\n}\n\n.service-requests:first-child {\n\tborder-right: 0;\n}\n\n.medication-requests {\n\twidth: 100%;\n}\n\n.open-section-head {\n\tbackground-color: var(--bg-color);\n\tmin-height: 30px;\n\tborder-bottom: 1px solid var(--border-color);\n\tpadding: 10px;\n\tfont-weight: bold;\n}\n\n.no-orders {\n    text-align: center;\n    padding: 30px;\n}\n\n.form-footer {\n\tbackground-color: var(--bg-color);\n}\n\n.lab-details {\n\tfont-size: 10px;\n\tpadding-left: 4px;\n\tpadding-right: 12px;\n\twidth: 100%;\n}\n\n.service-request-details, .medication-request-details {\n\tpadding-left: 14px;\n\tpadding-right: 14px;\n}\n\n.invoiced {\n\tfloat: left;\n\tpadding-right: 10px;\n\tcolor:rgb(163, 160, 160)\n}\n\n</style>`;\n"],
  "mappings": ";;AAAA,SAAO,QAAQ,gBAAgB;AAE/B,SAAO,GAAG,KAAK,wBAAwB,MAAM,8BAA8B,OAAO,GAAG,KAAK,eAAe;AAAA,IAExG,YAAY,SAAS,cAAc,eAAe,KAAK,OAAO;AAC7D,YAAM,SAAS,cAAc,eAAe,KAAK,KAAK;AACtD,WAAK,yBAAyB;AAAA,IAC/B;AAAA,IAEA,gBAAgB;AAGf,UAAI,gBAAgB,KAAK,UAAU;AAAA,QAClC,WAAS,CAAC,KAAK,oBAAoB,EAAE,IAAI,CAAAA,WAASA,OAAM,SAAS,EAAE,SAAS,MAAM,SAAS;AAAA,MAC5F;AAEA,WAAK,YAAY,KAAK,oBAAoB;AAG1C,WAAK,UAAU,OAAO,GAAG,GAAG,GAAG,aAAa;AAE5C,YAAM,cAAc;AAAA,IACrB;AAAA,IAEA,sBAAsB;AACrB,aAAO;AAAA,QACN;AAAA,UACC,OAAO,GAAG,YAAY;AAAA,UACtB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,aAAa;AAAA,UACvB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,WAAW;AAAA,UACrB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,WAAW;AAAA,UACX,aAAa;AAAA,QACd;AAAA,QACA;AAAA,UACC,OAAO,GAAG,QAAQ;AAAA,UAClB,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,QACV;AAAA,QACA;AAAA,UACC,OAAO,GAAG,aAAa;AAAA,UACvB,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS,OAAO,KAAK,aAAa,WAAW,aAAa,EAAE;AAAA,QAC7D;AAAA,QACA;AAAA,UACC,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,YAAY;AAAA,UACtB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,6BAA6B;AAAA,UACvC,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,WAAW;AAAA,UACX,OAAO,GAAG,iBAAiB;AAAA,UAC3B,aAAa;AAAA,QACd;AAAA,QACA;AAAA,UACC,OAAO,GAAG,UAAU;AAAA,UACpB,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,QACV;AAAA,QACA;AAAA,UACC,OAAO,GAAG,gBAAgB;AAAA,UAC1B,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,eAAe;AAAA,UACzB,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,QACV;AAAA,QACA;AAAA,UACC,WAAW;AAAA,UACX,OAAO,GAAG,iBAAiB;AAAA,UAC3B,aAAa;AAAA,QACd;AAAA,QACA;AAAA,UACC,OAAO,GAAG,gBAAgB;AAAA,UAC1B,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,gBAAgB;AAAA,UAC1B,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,UAAU;AAAA,UACpB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,MAAM;AAAA,UAChB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,OAAO;AAAA,UACjB,WAAW;AAAA,UACX,WAAW;AAAA,QACZ;AAAA,QACA;AAAA,UACC,OAAO,GAAG,SAAS;AAAA,UACnB,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,QACV;AAAA,MACD;AAAA,IACD;AAAA,EACD;;;ACxIA,SAAO,QAAQ,YAAY;AAE3B,aAAW,cAAc,MAAM,YAAY;AAAA,IAC1C,YAAY,MAAM;AACjB,QAAE,OAAO,MAAM,IAAI;AAAA,IACpB;AAAA,IAEA,UAAU;AACT,UAAI,KAAK;AACT,WAAK,cAAc,KAAK,sBAAsB,EAAE,OAAO;AACvD,aAAO,aAAa;AAAA,QACnB,MAAM,OAAO,KAAK;AAAA,UAClB,QAAQ;AAAA,UACR,MAAM;AAAA,YACL,SAAS,GAAG,IAAI,IAAI;AAAA,UACrB;AAAA,UACA,QAAQ;AAAA,UACR,UAAU,SAAS,GAAG;AACrB,gBAAI,sBAAsB,EAAE,WAAW,CAAC;AACxC,gBAAI,mBAAmB,OAAO;AAAA,cAC7B;AAAA,cACA;AAAA,gBACC;AAAA,gBACA,oBAAoB,GAAG;AAAA,cACxB;AAAA,YACD;AACA,cAAE,gBAAgB,EAAE,SAAS,GAAG,mBAAmB;AAAA,UACnD;AAAA,QACD,CAAC;AAAA,QACD,MAAM;AACL,aAAG,iBAAiB;AACpB,YAAE,eAAe,EAAE,KAAK,uBAAuB,EAAE,GAAG,SAAS,WAAW;AACvE,eAAG,iBAAiB,IAAI;AAAA,UACzB,CAAC;AACD,mBAAS,eAAe,aAAa,EAAE,WAAW,WAAW;AAC5D,eAAG,IAAI,MAAM;AAAA,UACd;AACA,YAAE,eAAe,EAAE,KAAK,cAAc,EAAE,OAAO,WAAW;AACzD,eAAG,IAAI,MAAM;AAAA,UACd,CAAC;AAAA,QAKF;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEA,mBAAoB;AACnB,UAAI,KAAK;AACT,UAAI,oBAAoB,MAAM;AAC7B,YAAI,IAAI,IAAI,OAAO,GAAG,OAAO;AAAA,UAC5B,OAAO,GAAG,iBAAiB;AAAA,UAC3B,QAAQ;AAAA,YACP;AAAA,cACC,SAAS;AAAA,cACT,aAAa;AAAA,cACb,aAAa;AAAA,cACb,WAAW;AAAA,cACX,QAAQ;AAAA,YACT;AAAA,YACA;AAAA,cACC,SAAS;AAAA,cACT,aAAa;AAAA,cACb,aAAa;AAAA,cACb,aAAa;AAAA,YACd;AAAA,YACA;AAAA,cACC,SAAS;AAAA,cACT,aAAa;AAAA,cACb,aAAa;AAAA,cACb,cAAc;AAAA,YACf;AAAA,YACA;AAAA,cACC,SAAS;AAAA,cACT,aAAa;AAAA,cACb,aAAa;AAAA,cACb,cAAc;AAAA,YACf;AAAA,YACA;AAAA,cACC,SAAS;AAAA,cACT,aAAa;AAAA,cACb,aAAa;AAAA,cACb,cAAc;AAAA,YACf;AAAA,UACD;AAAA,UACA,gBAAgB,WAAW;AAC1B,gBAAI,OAAO,EAAE,WAAW;AACxB,gBAAI,SAAS;AACb,gBAAI,CAAC,SAAS,OAAO,EAAE,SAAS,KAAK,mBAAmB,GAAG;AAC1D,uBAAS,KAAK;AAAA,YACf,WAAW,CAAC,YAAY,SAAS,EAAE,SAAS,KAAK,mBAAmB,GAAG;AACtE,uBAAS,KAAK;AAAA,YACf,WACS,KAAK,uBAAqB,QAAQ;AAC1C,uBAAS,KAAK;AAAA,YACf;AACA,mBAAO,KAAK;AAAA,cACX,QAAQ;AAAA,cACR,MAAM;AAAA,gBACL,SAAS,GAAG,IAAI,IAAI;AAAA,gBACpB,UAAU,KAAK;AAAA,gBACf,WAAW,KAAK,uBAAuB;AAAA,gBACvC;AAAA,gBACA,KAAK,GAAG,IAAI,IAAI;AAAA,gBAChB,SAAS,GAAG,IAAI,IAAI;AAAA,cACrB;AAAA,cACA,QAAQ;AAAA,cACR,UAAU,SAAS,GAAG;AACrB,oBAAI,CAAC,EAAE,KAAK;AACX,qBAAG,QAAQ;AAAA,gBACZ;AACA,kBAAE,KAAK;AAAA,cACR;AAAA,YACD,CAAC;AAAA,UACF;AAAA,UACA,sBAAsB,GAAG,iBAAiB;AAAA,QAC3C,CAAC;AACD,UAAE,YAAY,wBAAwB,GAAG,WAAW,MAAM;AACzD,cAAI,EAAE,UAAU,sBAAsB,GAAG;AACxC,mBAAO,GAAG,UAAU,wBAAwB,EAAC,QAAQ,EAAE,UAAU,sBAAsB,EAAC,GAAG,CAAC,uBAAuB,eAAe,GAAG,CAAC,MAAM;AAC3I,kBAAI,EAAE,uBAAuB,CAAC,EAAE,eAAe;AAC9C,kBAAE,UAAU,uBAAuB,EAAE,mBAAmB;AAAA,cACzD;AAAA,YACD,CAAC;AAAA,UACF;AAAA,QACD;AACA,UAAE,KAAK;AAAA,MACR;AACA,QAAE,sBAAsB,EAAE,MAAM,iBAAiB;AAAA,IAClD;AAAA,IAEA,iBAAkB,UAAU;AAC3B,UAAI,KAAK;AACT,UAAI,MAAM,EAAE,QAAQ,EAAE,QAAQ,cAAc;AAC5C,UAAI,mBAAmB,IAAI,KAAK,MAAM;AACtC,UAAI,sBAAsB,IAAI,KAAK,YAAY;AAC/C,UAAI,SAAS,EAAE,GAAG,EAAE,KAAK,iBAAiB,EAAE,KAAK,EAAE,KAAK;AACvD,UAAI,IAAI,IAAI,OAAO,GAAG,OAAO;AAAA,QAC5B,OAAO,GAAG,kBAAkB;AAAA,QAC5B,QAAQ;AAAA,UACP;AAAA,YACC,SAAS;AAAA,YACT,aAAa;AAAA,YACb,aAAa;AAAA,YACb,WAAW;AAAA,YACX,WAAW;AAAA,YACX,aAAa;AAAA,UACd;AAAA,UACA;AAAA,YACC,SAAS;AAAA,YACT,aAAa;AAAA,YACb,aAAa;AAAA,YACb,aAAa;AAAA,YACb,WAAW;AAAA,UACZ;AAAA,UACA;AAAA,YACC,SAAS;AAAA,YACT,aAAa;AAAA,YACb,aAAa;AAAA,YACb,cAAc;AAAA,YACd,WAAW;AAAA,UACZ;AAAA,UACA;AAAA,YACC,SAAS;AAAA,YACT,aAAa;AAAA,YACb,aAAa;AAAA,YACb,cAAc;AAAA,YACd,WAAW;AAAA,UACZ;AAAA,UACA;AAAA,YACC,SAAS;AAAA,YACT,aAAa;AAAA,YACb,aAAa;AAAA,YACb,cAAc;AAAA,YACd,WAAW;AAAA,UACZ;AAAA,QACD;AAAA,QACA,gBAAgB,WAAW;AAC1B,cAAI,OAAO,EAAE,WAAW;AACxB,cAAIC,UAAS;AACb,cAAI,CAAC,SAAS,OAAO,EAAE,SAAS,KAAK,mBAAmB,GAAG;AAC1D,YAAAA,UAAS,KAAK;AAAA,UACf,WAAW,CAAC,YAAY,SAAS,EAAE,SAAS,KAAK,mBAAmB,GAAG;AACtE,YAAAA,UAAS,KAAK;AAAA,UACf,WACS,KAAK,uBAAqB,QAAQ;AAC1C,YAAAA,UAAS,KAAK;AAAA,UACf;AACA,iBAAO,KAAK;AAAA,YACX,QAAQ;AAAA,YACR,MAAM;AAAA,cACL,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,uBAAuB;AAAA,cACvC,QAAQA;AAAA,YACT;AAAA,YACA,QAAQ;AAAA,YACR,UAAU,SAAS,GAAG;AACrB,kBAAI,CAAC,EAAE,KAAK;AACX,mBAAG,QAAQ;AACX,kBAAE,KAAK;AAAA,cACR;AAAA,YAED;AAAA,UACD,CAAC;AAAA,QACF;AAAA,QACA,sBAAsB,GAAG,MAAM;AAAA,MAChC,CAAC;AACD,QAAE,KAAK;AAAA,IACT;AAAA,EAED;;;AClNC,SAAO,UAAU,iBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACDnC,SAAO,Q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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAtC,SAAO,UAAU,uBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;",
  "names": ["field", "result"]
}
